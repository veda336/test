import React from "react";

// Component renderer mapping
import Textbox from "./components/Textbox";
import Table from "./components/Table";
import AccordionComponent from "./components/AccordionComponent";
import CanvasComponent from "./components/CanvasComponent";

const componentMap = {
  Textbox,
  Table,
  Accordion: AccordionComponent,
  Canvas: CanvasComponent,
};

const MiddlePanel = ({ components }) => {
  const renderComponent = (component) => {
    const Component = componentMap[component.type];
    if (!Component) return null;

    return (
      <Component key={component.id} component={component}>
        {/* Recursive rendering for children */}
        {component.type === "Canvas" &&
          component.children.map((col) => (
            <div
              key={col.columnIndex}
              style={{
                display: "flex",
                border: "1px dotted gray",
                margin: "4px",
                minHeight: "50px",
                flex: 1,
              }}
            >
              {col.components.map((child) => renderComponent(child))}
            </div>
          ))}

        {component.type === "Accordion" &&
          component.children.map((child) => renderComponent(child))}
      </Component>
    );
  };

  return <div>{components.map((c) => renderComponent(c))}</div>;
};

export default MiddlePanel;