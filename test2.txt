import React from "react";

// Import your actual UI components
import Textbox from "./components/Textbox";
import Table from "./components/Table";
import AccordionComponent from "./components/AccordionComponent";
import CanvasComponent from "./components/CanvasComponent";

// Map component types to React components
const componentMap = {
  Textbox,
  Table,
  Accordion: AccordionComponent,
  Canvas: CanvasComponent,
};

const MiddlePanel = ({ droppedComponents }) => {
  // Recursive rendering function
  const renderComponent = (component) => {
    const Component = componentMap[component.type];
    if (!Component) return null;

    return (
      <Component key={component.id} component={component}>
        {/* Canvas children: render columns */}
        {component.type === "Canvas" &&
          component.children.map((col) => (
            <div
              key={col.columnIndex}
              style={{
                display: "flex",
                border: "1px dotted gray",
                margin: "4px",
                minHeight: "50px",
                flex: 1,
              }}
            >
              {col.components.map((child) => renderComponent(child))}
            </div>
          ))}

        {/* Accordion children: render nested components */}
        {component.type === "Accordion" &&
          component.children.map((child) => renderComponent(child))}
      </Component>
    );
  };

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: "8px" }}>
      {droppedComponents.map((component) => renderComponent(component))}
    </div>
  );
};

export default MiddlePanel;